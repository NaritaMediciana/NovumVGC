###########################
# Taiwanese Events
###########################

add_namespace = piotrtaiwan
add_namespace = thundertaiwan

country_event = {
	id = piotrtaiwan.1
	title = piotrtaiwan.1_t
	desc = piotrtaiwan.1_d
	picture = GFX_report_event_war
	is_triggered_only = yes
	
	option = { #Start plotting
	name = piotrtaiwan.o1
	ai_chance = { factor = 10 }
	custom_effect_tooltip = CHI_the_military_will_interupt_the_elections
	set_country_flag = CHI_military_coup_flag	
	hidden_effect = {
	country_event = { 
                          id = piotrtaiwan.2
                          days = 2
                          random = 80
                     }
	}
	}
	option = { # Don't (historical)
	name = piotrtaiwan.o1
	ai_chance = { factor = 90 }
    }
}

country_event = { #a little plottin'
	id = piotrtaiwan.2
	title = piotrtaiwan.2_t
	desc = piotrtaiwan.2_d
	picture = GFX_report_event_political_deal
	is_triggered_only = yes
	
	option = { #Start plotting
	name = piotrtaiwan2.o1
	add_popularity = {
				ideology = nationalist
				popularity = 0.03
			}
	}
}

country_event = { #the coup!
	id = piotrtaiwan.3
	title = piotrtaiwan.3_t
	desc = piotrtaiwan.3_d
	picture = GFX_report_event_political_deal
	is_triggered_only = yes
	
	option = { #Start plotting
	name = piotrtaiwan3.o1
	 add_ideas = CHI_a_nation_in_flames
	 set_politics = {
			    ruling_party = nationalist
		        elections_allowed = no
		 }
				add_popularity = { 
		        ideology = nationalist
			    popularity = 0.15
		    }
	}
}

country_event = { #the elections
	id = piotrtaiwan.4
	title = piotrtaiwan.4_t
	desc = piotrtaiwan.4_d
	picture = GFX_report_event_coup_political_agreement
	is_triggered_only = yes
	
	option = { 
	name = piotrtaiwan4.o1 #kmt wins
				add_popularity = { 
		        ideology = conservative
			    popularity = 0.05
		    }
	}
	
	option = {
	name = piotrtaiwan4.o2 #progressive people wins
			set_politics = {
			ruling_party = progressive
		    elections_allowed = yes
		    }
			add_popularity = { 
		    ideology = progressive
			popularity = 0.05
		    }
	}
	
	option = {
	name = piotrtaiwan4.o3 #reactionary people wins
			set_politics = {
			ruling_party = reactionary
		    elections_allowed = yes
		    }
			add_popularity = { 
		    ideology = reactionary
			popularity = 0.15
		    }
	}
}

country_event = { #on fire once more
	id = piotrtaiwan.5
	title = piotrtaiwan.5_t
	desc = piotrtaiwan.5_d
	picture = GFX_report_event_coup_political_agreement
	is_triggered_only = yes
	
	option = { 
	name = piotrtaiwan5.o1 #zad
				add_political_power = -300
				add_stability = -0.15
				add_war_support = -0.35
				add_ideas = CHI_a_nation_in_flames
				add_popularity = { 
		        ideology = communist
			    popularity = 0.3
		    }
	}
}

country_event = { #Boycot
	id = piotrtaiwan.6
	title = piotrtaiwan.6_t
	desc = piotrtaiwan.6_d
	picture = GFX_report_event_coup_political_agreement
	is_triggered_only = yes
	
	option = { 
	name = piotrtaiwan6.o1 #zad
				add_timed_idea = {
				idea = CHI_products_boycotted
				days = 200
			   } 
	}
}

#Mass protests
country_event = {
	id = piotrtaiwan.7
	title = piotrtaiwan.7.t
	desc = piotrtaiwan.7.d
	picture = GFX_report_event_political_deal
	
	is_triggered_only = yes
	
	option = {
		name = piotrtaiwan.7.o1
		CHI = { annex_country = { target = YUG transfer_troops = yes } }
		ai_chance = {
			factor = 20
	   }
	}
	
	option = {
		name = piotrtaiwan.7.o2
		hidden_effect = {
		division_template = {
						name = "Rebels"
						priority = 1
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
				
		    	   		 	infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
				
						}
						support = {
						}
					}
		596 = {
					create_unit = {
						division = "name = \"Rebels\" division_template = \"Rebels\" start_experience_factor = 0.2" 
						owner = CHI
					}
					create_unit = {
						division = "name = \"Rebels\" division_template = \"Rebels\" start_experience_factor = 0.2" 
						owner = CHI
					}
				}
		613 = {
					create_unit = {
						division = "name = \"Rebels\" division_template = \"Rebels\" start_experience_factor = 0.2" 
						owner = CHI
					}
					create_unit = {
						division = "name = \"Rebels\" division_template = \"Rebels\" start_experience_factor = 0.2" 
						owner = CHI
					}
				}
		593 = {
					create_unit = {
						division = "name = \"Rebels\" division_template = \"Rebels\" start_experience_factor = 0.2" 
						owner = CHI
					}
					create_unit = {
						division = "name = \"Rebels\" division_template = \"Rebels\" start_experience_factor = 0.2" 
						owner = CHI
					}
				}

			595 = {
					create_unit = {
						division = "name = \"Rebels\" division_template = \"Rebels\" start_experience_factor = 0.2" 
						owner = CHI
					}
					create_unit = {
						division = "name = \"Rebels\" division_template = \"Rebels\" start_experience_factor = 0.2" 
						owner = CHI
					}
				}

        591 = {
					create_unit = {
						division = "name = \"Rebels\" division_template = \"Rebels\" start_experience_factor = 0.2" 
						owner = CHI
					}
					create_unit = {
						division = "name = \"Rebels\" division_template = \"Rebels\" start_experience_factor = 0.2" 
						owner = CHI
					}
			}				
		}
		CHI = {
		declare_war_on = { 
		    type = annex_everything 
			target = PRC
		}
		}
		PRC = {
		release = TIB
		declare_war_on = {
        target = TIB
        type = annex_everything
        }
		}
		PRC = { transfer_units_fraction = {
	target = TIB
	size = 0.1
	stockpile_ratio = 0.01
	army_ratio = 0.1 
	 } 
	}
		ai_chance = {
			factor = 80
	   }
	}
}

###old
country_event = {
	id = thundertaiwan.1
	title = thundertaiwan.1_title
	desc = thundertaiwan.1_desc
	
	is_triggered_only = yes
	
	option = { # Join the alliance
		name = thundertaiwan.1_option1
		ai_chance = { factor = 70 }
		CHI = { add_to_faction = ROOT }
		add_ai_strategy = {
                            type = alliance
                            id = CHI
                            value = 200
                        }
						CHI = {country_event = { id = thundertaiwan.11 }}
	}
	option = { # Do not join the alliance
		name = thundertaiwan.1_option2
		ai_chance = { factor = 30 }
    reverse_add_opinion_modifier = {
    target = CHI
    modifier = medium_decrease }
	CHI = {country_event = { id = thundertaiwan.12 }}
}
}
country_event = {
	id = thundertaiwan.11
	title = "thundertaiwan.11_title"
	desc = "thundertaiwan.11_desc"
	
	is_triggered_only = yes
	
	option = { 
		name = "thundertaiwan.11_option1"
		ai_chance = { factor = 100 }	
}
}
country_event = {
	id = thundertaiwan.12
	title = "thundertaiwan.12_title"
	desc = "thundertaiwan.12_desc"
	
	is_triggered_only = yes
	
	option = { 
		name = "thundertaiwan.12_option1"
		ai_chance = { factor = 100 }	
}
}
country_event = {
	id = thundertaiwan.2
	title = "thundertaiwan.2_title"
	desc = "thundertaiwan.2_desc"
	
	is_triggered_only = yes
	
	option = { # Become Taiwanese puppet
		name = "thundertaiwan.2_option1"
		ai_chance = { factor = 50 }
		CHI = { puppet = ROOT }
		CHI = {country_event = { id = thundertaiwan.21 }}
	}
	option = { # Fight Taiwan
		name = "thundertaiwan.2_option2"
		ai_chance = { factor = 50 }
    CHI = { create_wargoal = { type = puppet_wargoal_focus
	 target = ROOT } }
	 CHI = {country_event = { id = thundertaiwan.22 }}
	}
}
country_event = {
	id = thundertaiwan.21
	title = "thundertaiwan.21_title"
	desc = "thundertaiwan.21_desc"
	
	is_triggered_only = yes
	
	option = { 
		name = "thundertaiwan.21_option1"
		ai_chance = { factor = 100 }	
}
}
country_event = {
	id = thundertaiwan.22
	title = "thundertaiwan.22_title"
	desc = "thundertaiwan.22_desc"
	
	is_triggered_only = yes
	
	option = { 
		name = "thundertaiwan.22_option1"
		ai_chance = { factor = 100 }	
}
}
country_event = {
	id = thundertaiwan.3
	title = "thundertaiwan.3_title"
	desc = "thundertaiwan.3_desc"
	
	is_triggered_only = yes
	
	option = { # Let them join
		name = "thundertaiwan.3_option1"
		ai_chance = { factor = 70 }
		USA = { add_to_faction = CHI }
		add_ai_strategy = {
                            type = alliance
                            id = CHI
                            value = 200
                        }
	# reverse_add_opinion_modifier = {
    # target = PRC
    # modifier = high_decrease }
	CHI = {country_event = { id = thundertaiwan.31 }}
	}
	option = { # Do not let them join
		name = "thundertaiwan.3_option2"
		ai_chance = { factor = 0 }
	CHI = {country_event = { id = thundertaiwan.32 }}
}
}
country_event = {
	id = thundertaiwan.31
	title = "thundertaiwan.31_title"
	desc = "thundertaiwan.31_desc"
	
	is_triggered_only = yes
	
	option = { 
		name = "thundertaiwan.31_option1"
		ai_chance = { factor = 100 }	
}
}
country_event = {
	id = thundertaiwan.32
	title = "thundertaiwan.32_title"
	desc = "thundertaiwan.32_desc"
	
	is_triggered_only = yes
	
	option = { 
		name = "thundertaiwan.32_option1."
		ai_chance = { factor = 100 }	
}
}
country_event = {
	id = thundertaiwan.4
	title = "thundertaiwan.4_title"
	desc = "thundertaiwan.4_desc"
	
	is_triggered_only = yes
	
	option = { # Create the alliance
		name = "thundertaiwan.4_option1"
		ai_chance = { factor = 70 }
		CHI = { create_faction = East_Asian_Peace_Keeping_Organization }
		CHI = { add_to_faction = ROOT }
		add_ai_strategy = {
                            type = alliance
                            id = CHI
                            value = 200
                        }
		CHI = {country_event = { id = thundertaiwan.41 }}
	}
	option = { # Do not create the alliance
		name = "thundertaiwan.4_option2"
		ai_chance = { factor = 30 }
    reverse_add_opinion_modifier = {
    target = CHI
    modifier = medium_decrease }
	CHI = {country_event = { id = thundertaiwan.42 }}
} }
country_event = {
	id = thundertaiwan.41
	title = "thundertaiwan.41_title"
	desc = "thundertaiwan.41_desc"
	
	is_triggered_only = yes
	
	option = { 
		name = "thundertaiwan.41_option1"
		ai_chance = { factor = 100 }	
}
}
country_event = {
	id = thundertaiwan.42
	title = "thundertaiwan.42_title"
	desc = "thundertaiwan.42_desc"
	
	is_triggered_only = yes
	
	option = { 
		name = "thundertaiwan.42_option1"
		ai_chance = { factor = 100 }	
}
}
country_event = {
	id = thundertaiwan.5
	title = "thundertaiwan.5_title"
    desc = "thundertaiwan.5_desc"

    is_triggered_only = yes

    option = { # Ignore Taiwan
        name = "thundertaiwan.5_option1"
        ai_chance = { factor = 60 }
        add_stability = -0.1
        add_war_support = -0.1
    }
    option = { # Fight Taiwan
        name = "thundertaiwan.5_option2"
        ai_chance = { factor = 40 }
    PRC = { create_wargoal = { type = annex_everything
     target = CHI } }
    }
}
country_event = {
	id = thundertaiwan.6
	title = "thundertaiwan.6_title"
	desc = "thundertaiwan.6_desc"
	
	is_triggered_only = yes

	trigger = {
        has_government = monarchist
        has_stability < 0.45
    }
	
	option = { 
		name = "thundertaiwan.6_option1"
		ai_chance = { factor = 100 }
		start_civil_war = {
			ruling_party = ROOT
			ideology = democratic_socialist
			size = 0.25
			#only_own_territory = yes
			keep_political_leader = yes
			keep_political_party_members = yes
		}	
}	
}