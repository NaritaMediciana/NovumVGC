
KOR_loyalty_setting_effect = {
	clear_variable = KOR_all_loyalty_status
	clear_variable = KOR_all_ruling_party_status
	clear_variable = KOR_all_right_wing_party_seats_status
	clear_variable = KOR_all_left_wing_party_seats_status
	
	#set_variable = { KOR_all_loyalty_status = BUL_faction_high_decrease }
	add_to_variable = { var = KOR_all_loyalty_status  value = KOR_fundamentalists_loyalty_status }
	add_to_variable = { var = KOR_all_loyalty_status  value = KOR_reactionists_loyalty_status }
	add_to_variable = { var = KOR_all_loyalty_status  value = KOR_neocon_loyalty_status }
	add_to_variable = { var = KOR_all_loyalty_status  value = KOR_conservatism_loyalty_status }
	add_to_variable = { var = KOR_all_loyalty_status  value = KOR_social_liberalism_loyalty_status }
	add_to_variable = { var = KOR_all_loyalty_status  value = KOR_democratic_socialism_loyalty_status }
	add_to_variable = { var = KOR_all_loyalty_status  value = KOR_centrist_loyalty_status }
	add_to_variable = { var = KOR_all_loyalty_status  value = KOR_social_democracy_loyalty_status }
	add_to_variable = { var = KOR_all_loyalty_status  value = KOR_NL_loyalty_status }
	add_to_variable = { var = KOR_all_loyalty_status  value = KOR_feminism_loyalty_status }
	
	clamp_variable = {
		var = KOR_fundamentalists_loyalty_status
		min = 0
		max = KOR_fundamentalists_seats_status
	}
	clamp_variable = {
		var = KOR_reactionists_loyalty_status
		min = 0
		max = KOR_reactionists_seats_status
	}
	clamp_variable = {
		var = KOR_neocon_loyalty_status
		min = 0
		max = KOR_neocon_seats_status
	}
	clamp_variable = {
		var = KOR_conservatism_loyalty_status
		min = 0
		max = KOR_conservatism_seats_status
	}
	clamp_variable = {
		var = KOR_social_liberalism_loyalty_status
		min = 0
		max = KOR_social_liberalism_seats_status
	}
	clamp_variable = {
		var = KOR_democratic_socialism_loyalty_status
		min = 0
		max = KOR_democratic_socialism_seats_status
	}
	clamp_variable = {
		var = KOR_centrist_loyalty_status
		min = 0
		max = KOR_centrist_seats_status
	}
	clamp_variable = {
		var = KOR_social_democracy_loyalty_status
		min = 0
		max = KOR_social_democracy_seats_status
	}
	clamp_variable = {
		var = KOR_NL_loyalty_status
		min = 0
		max = KOR_NL_seats_status
	}
	clamp_variable = {
		var = KOR_feminism_loyalty_status
		min = 0
		max = KOR_feminism_seats_status
	}
}

KOR_parties_support_setting_effect = {
	
	clamp_variable = {
		var = KOR_fundamentalists_support_status
		min = 0
		max = KOR_all_seats_status
	}
	clamp_variable = {
		var = KOR_reactionists_support_status
		min = 0
		max = KOR_all_seats_status
	}
	clamp_variable = {
		var = KOR_neocon_support_status
		min = 0
		max = KOR_all_seats_status
	}
	clamp_variable = {
		var = KOR_conservatism_support_status
		min = 0
		max = KOR_all_seats_status
	}
	clamp_variable = {
		var = KOR_social_liberalism_support_status
		min = 0
		max = KOR_all_seats_status
	}
	clamp_variable = {
		var = KOR_democratic_socialism_support_status
		min = 0
		max = KOR_all_seats_status
	}
	clamp_variable = {
		var = KOR_centrist_support_status
		min = 0
		max = KOR_all_seats_status
	}
	clamp_variable = {
		var = KOR_social_democracy_support_status
		min = 0
		max = KOR_all_seats_status
	}
	clamp_variable = {
		var = KOR_NL_support_status
		min = 0
		max = KOR_all_seats_status
	}
	clamp_variable = {
		var = KOR_feminism_support_status
		min = 0
		max = KOR_all_seats_status
	}
	
	add_to_variable = { var = KOR_all_support_status_base  value = KOR_fundamentalists_support_status }
	add_to_variable = { var = KOR_all_support_status_base  value = KOR_reactionists_support_status }
	add_to_variable = { var = KOR_all_support_status_base  value = KOR_neocon_support_status }
	add_to_variable = { var = KOR_all_support_status_base  value = KOR_conservatism_support_status }
	add_to_variable = { var = KOR_all_support_status_base  value = KOR_social_liberalism_support_status }
	add_to_variable = { var = KOR_all_support_status_base  value = KOR_democratic_socialism_support_status }
	add_to_variable = { var = KOR_all_support_status_base  value = KOR_centrist_support_status }
	add_to_variable = { var = KOR_all_support_status_base  value = KOR_social_democracy_support_status }
	add_to_variable = { var = KOR_all_support_status_base  value = KOR_NL_support_status }
	add_to_variable = { var = KOR_all_support_status_base  value = KOR_feminism_support_status }
	
	
	if = {
		limit = {
			OR = {
				has_country_flag = KOR_fundamentalists_coalition
				has_government = islamist
			}
		}
		add_to_variable = { var = KOR_all_ruling_party_status  value = KOR_fundamentalists_seats_status }
	}
	if = {
		limit = {
			OR = {
				has_country_flag = KOR_reactionists_coalition
				has_government = reactionary
			}
		}
		add_to_variable = { var = KOR_all_ruling_party_status  value = KOR_reactionists_seats_status }
	}
	if = {
		limit = {
			OR = {
				has_country_flag = KOR_neocon_coalition
				has_government = market_liberal
			}
		}
		add_to_variable = { var = KOR_all_ruling_party_status  value = KOR_neocon_seats_status }
	}
	if = {
		limit = {
			OR = {
				has_country_flag = KOR_conservatism_coalition
				has_government = conservative
			}
		}
		add_to_variable = { var = KOR_all_ruling_party_status  value = KOR_conservatism_seats_status }
	}
	if = {
		limit = {
			OR = {
				has_country_flag = KOR_social_liberalism_coalition
				has_government = social_liberal
			}
		}
		add_to_variable = { var = KOR_all_ruling_party_status  value = KOR_social_liberalism_seats_status }
	}
	if = {
		limit = {
			OR = {
				has_country_flag = KOR_democratic_socialism_coalition
				has_government = democratic_socialist
			}
		}
		add_to_variable = { var = KOR_all_ruling_party_status  value = KOR_democratic_socialism_seats_status }
	}
	if = {
		limit = {
			OR = {
				has_country_flag = KOR_centrist_coalition
			}
		}
		add_to_variable = { var = KOR_all_ruling_party_status  value = KOR_centrist_seats_status }
	}
	if = {
		limit = {
			OR = {
				has_country_flag = KOR_social_democracy_coalition
				has_government = social_democrat
			}
		}
		add_to_variable = { var = KOR_all_ruling_party_status  value = KOR_social_democracy_seats_status }
	}
	if = {
		limit = {
			OR = {
				has_country_flag = KOR_NL_coalition
				has_government = nationalist
			}
		}
		add_to_variable = { var = KOR_all_ruling_party_status  value = KOR_NL_seats_status }
	}
	if = {
		limit = {
			OR = {
				has_country_flag = KOR_feminism_coalition
				has_government = progressive
			}
		}
		add_to_variable = { var = KOR_all_ruling_party_status  value = KOR_feminism_seats_status }
	}
	
		add_to_variable = { var = KOR_all_right_wing_party_seats_status  value = KOR_fundamentalists_seats_status }
		add_to_variable = { var = KOR_all_right_wing_party_seats_status  value = KOR_reactionists_seats_status }
		add_to_variable = { var = KOR_all_right_wing_party_seats_status  value = KOR_neocon_seats_status }
	
		add_to_variable = { var = KOR_all_left_wing_party_seats_status  value = KOR_conservatism_seats_status }
		add_to_variable = { var = KOR_all_left_wing_party_seats_status  value = KOR_social_liberalism_seats_status }
		add_to_variable = { var = KOR_all_left_wing_party_seats_status  value = KOR_democratic_socialism_seats_status }
	
}

KOR_seats_general_election_effect = {
	#remove loyalty
	clear_variable = KOR_all_ruling_party_status
	clear_variable = KOR_all_right_wing_party_seats_status
	clear_variable = KOR_all_left_wing_party_seats_status

	#remove loyalty
	clear_variable = KOR_fundamentalists_loyalty_status
	clear_variable = KOR_reactionists_loyalty_status
	clear_variable = KOR_neocon_loyalty_status
	clear_variable = KOR_conservatism_loyalty_status
	clear_variable = KOR_social_liberalism_loyalty_status
	clear_variable = KOR_democratic_socialism_loyalty_status
	clear_variable = KOR_centrist_loyalty_status
	clear_variable = KOR_social_democracy_loyalty_status
	clear_variable = KOR_NL_loyalty_status
	clear_variable = KOR_feminism_loyalty_status
	
			clamp_variable = {
				var = KOR_fundamentalists_support_status
				min = 0
				max = KOR_all_seats_status
			}
			clamp_variable = {
				var = KOR_reactionists_support_status
				min = 0
				max = KOR_all_seats_status
			}
			clamp_variable = {
				var = KOR_neocon_support_status
				min = 0
				max = KOR_all_seats_status
			}
			clamp_variable = {
				var = KOR_conservatism_support_status
				min = 0
				max = KOR_all_seats_status
			}
			clamp_variable = {
				var = KOR_social_liberalism_support_status
				min = 0
				max = KOR_all_seats_status
			}
			clamp_variable = {
				var = KOR_democratic_socialism_support_status
				min = 0
				max = KOR_all_seats_status
			}
			clamp_variable = {
				var = KOR_centrist_support_status
				min = 0
				max = KOR_all_seats_status
			}
			clamp_variable = {
				var = KOR_social_democracy_support_status
				min = 0
				max = KOR_all_seats_status
			}
			clamp_variable = {
				var = KOR_NL_support_status
				min = 0
				max = KOR_all_seats_status
			}
			clamp_variable = {
				var = KOR_feminism_support_status
				min = 0
				max = KOR_all_seats_status
			}
	
	set_variable = { KOR_fundamentalists_seats_status = KOR_fundamentalists_support_status }
	set_variable = { KOR_reactionists_seats_status = KOR_reactionists_support_status }
	set_variable = { KOR_neocon_seats_status = KOR_neocon_support_status }
	set_variable = { KOR_conservatism_seats_status = KOR_conservatism_support_status }
	set_variable = { KOR_social_liberalism_seats_status = KOR_social_liberalism_support_status }
	set_variable = { KOR_democratic_socialism_seats_status = KOR_democratic_socialism_support_status }
	set_variable = { KOR_centrist_seats_status = KOR_centrist_support_status }
	set_variable = { KOR_social_democracy_seats_status = KOR_social_democracy_support_status }
	set_variable = { KOR_NL_seats_status = KOR_NL_support_status }
	set_variable = { KOR_feminism_seats_status = KOR_feminism_support_status }
	
	randomize_temp_variable = {
		var = KOR_fundamentalists_loyalty_status
		distribution = uniform
		min = 0
		max = KOR_fundamentalists_seats_status
	}
	randomize_temp_variable = {
		var = KOR_conservatism_loyalty_status
		distribution = uniform
		min = 0
		max = KOR_conservatism_seats_status
	}
}

KOR_fundamentalism_to_gain_strength = {
#custom_effect_tooltip = PRK_national_bankruptcy_down_tt
	if = {
		limit = { has_idea = kor_postnationalist_rivalry_win_2 }
		swap_ideas = {
			remove_idea = kor_postnationalist_rivalry_win_2
			add_idea = kor_postnationalist_rivalry_win_1
		}
	}
	else_if = {
		limit = { has_idea = kor_postnationalist_rivalry_win_1 }
		swap_ideas = {
			remove_idea = kor_postnationalist_rivalry_win_1
			add_idea = kor_postnationalist_christian_rivalry_balanced
		}
	}
	else_if = {
		limit = { has_idea = kor_postnationalist_christian_rivalry_balanced }
		swap_ideas = {
			remove_idea = kor_postnationalist_christian_rivalry_balanced
			add_idea = kor_christian_rivalry_win_1
		}
	}
	else_if = {
		limit = { has_idea = kor_christian_rivalry_win_1 }
		swap_ideas = {
			remove_idea = kor_christian_rivalry_win_1
			add_idea = kor_christian_rivalry_win_2
		}
	}
	else_if = {
		limit = { has_idea = kor_christian_rivalry_win_2 }
		custom_effect_tooltip = KOR_moon_chang_geuk_government_collapse_tt
	}
}

KOR_postnationalist_to_gain_strength = {
#custom_effect_tooltip = PRK_national_bankruptcy_down_tt
	if = {
		limit = { has_idea = kor_christian_rivalry_win_2 }
		swap_ideas = {
			remove_idea = kor_christian_rivalry_win_2
			add_idea = kor_christian_rivalry_win_1
		}
	}
	else_if = {
		limit = { has_idea = kor_christian_rivalry_win_1 }
		swap_ideas = {
			remove_idea = kor_christian_rivalry_win_1
			add_idea = kor_postnationalist_christian_rivalry_balanced
		}
	}
	else_if = {
		limit = { has_idea = kor_postnationalist_christian_rivalry_balanced }
		swap_ideas = {
			remove_idea = kor_postnationalist_christian_rivalry_balanced
			add_idea = kor_postnationalist_rivalry_win_1
		}
	}
	else_if = {
		limit = { has_idea = kor_postnationalist_rivalry_win_1 }
		swap_ideas = {
			remove_idea = kor_postnationalist_rivalry_win_1
			add_idea = kor_postnationalist_rivalry_win_2
		}
	}
	else_if = {
		limit = { has_idea = kor_postnationalist_rivalry_win_2 }
		custom_effect_tooltip = KOR_moon_chang_geuk_government_collapse_tt
	}
}

KOR_army_reform = {
#custom_effect_tooltip = PRK_national_bankruptcy_down_tt
	if = {
		limit = { has_idea = kor_descendant_of_the_Imperial_army_1 }
		swap_ideas = {
			remove_idea = kor_descendant_of_the_Imperial_army_1
			add_idea = kor_descendant_of_the_Imperial_army_2
		}
		add_timed_idea = { idea = kor_angry_army days = 210 }
	}
	else_if = {
		limit = { has_idea = kor_descendant_of_the_Imperial_army_2 }
		swap_ideas = {
			remove_idea = kor_descendant_of_the_Imperial_army_2
			add_idea = kor_descendant_of_the_Imperial_army_3
		}
		add_timed_idea = { idea = kor_angry_army days = 210 }
	}
	else_if = {
		limit = { has_idea = kor_descendant_of_the_Imperial_army_3 }
		swap_ideas = {
			remove_idea = kor_descendant_of_the_Imperial_army_3
			add_idea = kor_descendant_of_the_Imperial_army_4
		}
		add_timed_idea = { idea = kor_angry_army days = 210 }
	}
	else_if = {
		limit = { has_idea = kor_descendant_of_the_Imperial_army_4 }
		remove_ideas = kor_descendant_of_the_Imperial_army_4
	}
}

KOR_keep_going_anarchism = {
	if = {
		limit = { has_idea = KOR_anarchist_society_1 }
		swap_ideas = {
			remove_idea = KOR_anarchist_society_1
			add_idea = KOR_anarchist_society_2
		}
	}
	else_if = {
		limit = { has_idea = KOR_anarchist_society_2 }
		swap_ideas = {
			remove_idea = KOR_anarchist_society_2
			add_idea = KOR_anarchist_society_3
		}
	}
	else_if = {
		limit = { has_idea = KOR_anarchist_society_3 }
		swap_ideas = {
			remove_idea = KOR_anarchist_society_3
			add_idea = KOR_anarchist_society_4
		}
	}
	else_if = {
		limit = { has_idea = KOR_anarchist_society_4 }
		swap_ideas = {
			remove_idea = KOR_anarchist_society_4
			add_idea = KOR_anarchist_society_5
		}
	}
	else_if = {
		limit = { has_idea = KOR_anarchist_society_5 }
		swap_ideas = {
			remove_idea = KOR_anarchist_society_5
			add_idea = KOR_anarchist_society_6
		}
	}
	else_if = {
		limit = { has_idea = KOR_anarchist_society_6 }
		swap_ideas = {
			remove_idea = KOR_anarchist_society_6
			add_idea = KOR_anarchist_society_7
		}
	}
	else_if = {
		limit = { has_idea = KOR_anarchist_society_7 }
		swap_ideas = {
			remove_idea = KOR_anarchist_society_7
			add_idea = KOR_anarchist_society_8
		}
	}
	else_if = {
		limit = { has_idea = KOR_anarchist_society_8 }
		swap_ideas = {
			remove_idea = KOR_anarchist_society_8
			add_idea = KOR_anarchist_society_9
		}
	}
	else_if = {
		limit = { has_idea = KOR_anarchist_society_9 }
		swap_ideas = {
			remove_idea = KOR_anarchist_society_9
			add_idea = KOR_anarchist_society_10
		}
	}
}


KOR_co_op_end_election_effect = {
	clr_country_flag = KOR_fundamentalists_coalition
	clr_country_flag = KOR_reactionists_coalition
	clr_country_flag = KOR_neocon_coalition
	
	clr_country_flag = KOR_conservatism_coalition
	clr_country_flag = KOR_social_liberalism_coalition
	clr_country_flag = KOR_democratic_socialism_coalition
	
	clr_country_flag = KOR_centrist_coalition
	clr_country_flag = KOR_social_democracy_coalition
	clr_country_flag = KOR_NL_coalition
	clr_country_flag = KOR_feminism_coalition
}

KOR_win_right_wing_co_op_effect = {
	set_country_flag = KOR_fundamentalists_coalition
	set_country_flag = KOR_reactionists_coalition
	set_country_flag = KOR_neocon_coalition
}

KOR_win_left_wing_co_op_effect = {
	set_country_flag = KOR_conservatism_coalition
	set_country_flag = KOR_social_liberalism_coalition
	set_country_flag = KOR_democratic_socialism_coalition
}

KOR_clear_prime_minster_effect = {
	remove_ideas = prime_minister_chung_hong_won
	remove_ideas = prime_minister_goh_kun
	remove_ideas = prime_minister_han_myeong_sook
	remove_ideas = prime_minister_hwang_kyo_ahn
	remove_ideas = prime_minister_hyun_soong_jong
	remove_ideas = prime_minister_kim_jong_pil
	remove_ideas = prime_minister_lee_nak_yon
	remove_ideas = prime_minister_rhyu_si_min
	remove_ideas = prime_minister_yoon_seo_in
	remove_ideas = prime_minister_jeon_kwang_hoon
	remove_ideas = prime_minister_paek_ki_wan
	remove_ideas = prime_minister_kwon_young_ghil
	remove_ideas = prime_minister_lee_jae_myung
}

KOR_RegimeStability_subtract_10_effect = {
	add_to_variable = { var = KORRegimeStability value = -10 }
	custom_effect_tooltip = kor_subtract_regime_stability_10_tt
	KOR_RegimeStability_minmax_effect = yes
}

KOR_RegimeStability_subtract_2_half_effect = {
	add_to_variable = { var = KORRegimeStability value = -2.5 }
	custom_effect_tooltip = kor_subtract_regime_stability_2_half_tt
	KOR_RegimeStability_minmax_effect = yes
}

KOR_RegimeStability_subtract_5_effect = {
	add_to_variable = { var = KORRegimeStability value = -5 }
	custom_effect_tooltip = kor_subtract_regime_stability_5_tt
	KOR_RegimeStability_minmax_effect = yes
}

KOR_RegimeStability_subtract_1_effect = {
	add_to_variable = { var = KORRegimeStability value = -1 }
	custom_effect_tooltip = kor_subtract_regime_stability_1_tt
	KOR_RegimeStability_minmax_effect = yes
}

KOR_RegimeStability_add_10_effect = {
	add_to_variable = { var = KORRegimeStability value = 10 }
	custom_effect_tooltip = kor_add_regime_stability_10_tt
	KOR_RegimeStability_minmax_effect = yes
}

KOR_RegimeStability_add_5_effect = {
	add_to_variable = { var = KORRegimeStability value = 5 }
	custom_effect_tooltip = kor_add_regime_stability_5_tt
	KOR_RegimeStability_minmax_effect = yes
}

KOR_RegimeStability_add_2_half_effect = {
	add_to_variable = { var = KORRegimeStability value = 2.5 }
	custom_effect_tooltip = kor_add_regime_stability_2_half_tt
	KOR_RegimeStability_minmax_effect = yes
}

KOR_RegimeStability_minmax_effect = {
	clamp_variable = {
		var = KORRegimeStability
		min = 0
		max = 100
	}
}